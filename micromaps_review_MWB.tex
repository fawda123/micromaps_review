\documentclass[letterpaper,12pt]{article}\usepackage[]{graphicx}\usepackage[]{color}
%% maxwidth is the original width if it is less than linewidth
%% otherwise use linewidth (to make sure the graphics do not exceed the margin)
\makeatletter
\def\maxwidth{ %
  \ifdim\Gin@nat@width>\linewidth
    \linewidth
  \else
    \Gin@nat@width
  \fi
}
\makeatother

\definecolor{fgcolor}{rgb}{0.345, 0.345, 0.345}
\newcommand{\hlnum}[1]{\textcolor[rgb]{0.686,0.059,0.569}{#1}}%
\newcommand{\hlstr}[1]{\textcolor[rgb]{0.192,0.494,0.8}{#1}}%
\newcommand{\hlcom}[1]{\textcolor[rgb]{0.678,0.584,0.686}{\textit{#1}}}%
\newcommand{\hlopt}[1]{\textcolor[rgb]{0,0,0}{#1}}%
\newcommand{\hlstd}[1]{\textcolor[rgb]{0.345,0.345,0.345}{#1}}%
\newcommand{\hlkwa}[1]{\textcolor[rgb]{0.161,0.373,0.58}{\textbf{#1}}}%
\newcommand{\hlkwb}[1]{\textcolor[rgb]{0.69,0.353,0.396}{#1}}%
\newcommand{\hlkwc}[1]{\textcolor[rgb]{0.333,0.667,0.333}{#1}}%
\newcommand{\hlkwd}[1]{\textcolor[rgb]{0.737,0.353,0.396}{\textbf{#1}}}%

\usepackage{framed}
\makeatletter
\newenvironment{kframe}{%
 \def\at@end@of@kframe{}%
 \ifinner\ifhmode%
  \def\at@end@of@kframe{\end{minipage}}%
  \begin{minipage}{\columnwidth}%
 \fi\fi%
 \def\FrameCommand##1{\hskip\@totalleftmargin \hskip-\fboxsep
 \colorbox{shadecolor}{##1}\hskip-\fboxsep
     % There is no \\@totalrightmargin, so:
     \hskip-\linewidth \hskip-\@totalleftmargin \hskip\columnwidth}%
 \MakeFramed {\advance\hsize-\width
   \@totalleftmargin\z@ \linewidth\hsize
   \@setminipage}}%
 {\par\unskip\endMakeFramed%
 \at@end@of@kframe}
\makeatother

\definecolor{shadecolor}{rgb}{.97, .97, .97}
\definecolor{messagecolor}{rgb}{0, 0, 0}
\definecolor{warningcolor}{rgb}{1, 0, 1}
\definecolor{errorcolor}{rgb}{1, 0, 0}
\newenvironment{knitrout}{}{} % an empty environment to be redefined in TeX

\usepackage{alltt}
\usepackage[top=1in,bottom=1in,left=1in,right=1in]{geometry}
\usepackage{setspace}
\usepackage[colorlinks=true,urlcolor=blue,citecolor=blue,linkcolor=blue]{hyperref}
\usepackage{indentfirst}
\usepackage{multirow}
\usepackage{booktabs}
\usepackage[final]{animate}
\usepackage{graphicx}
\usepackage{verbatim}
\usepackage{rotating}
\usepackage{tabularx}
\usepackage{array}
\usepackage{subfig} 
\usepackage[noae]{Sweave}
\usepackage{cleveref}
\usepackage[figureposition=bottom]{caption}
\usepackage{paralist}
\usepackage{acronym}
\usepackage{outlines}
\usepackage{pdflscape}

% knitr options




\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\begin{document}

\title{Review of the micromaps R package}
\author{Marcus W. Beck}
\maketitle

To address:
\begin{itemize}
\item Do you find the syntax of the micromap package easy to understand?
\item Could the main functions of the package, create\_map\_table, mmplot, and mmgroupedplot, be improved?
\item Is there anything about the structure of micromap objects that could be improved â€“ for instance, in order to use micromap objects in R Shiny, or to make setting micomap plot options more expressive (such as adding plotting elements to a geom in ggplot2)?
\item Is there some functionality of the package that you think is missing?
\item Is the documentation in the Introduction Guide, which comes with the package, and the JSS article helpful?
\end{itemize}

Ideas:
\begin{itemize}
\item I strongly encourage use of S3 object methods for defining the functions.  This makes it much easier to determine what object classes can be used as input to each function.  For example, the \texttt{create\_map\_table} function requires a \texttt{SpatialPolygonsDataFrame} object as input but this it not clear from the documentation - all that is specified is `shapefile'. Defining an S3 method for this class should create a generic and \texttt{SpatialPolygonsDataFrame} definition in the help file and will also ensure that a sensible error is returned if an unsupported object class is passed to the function.  This style of documentation is really easy using the roxygen and devtools packages.  
For example...
\begin{kframe}
\begin{alltt}
\hlcom{#' This is a function}
\hlcom{#'}
\hlcom{#' This is some more detail about the function}
\hlcom{#'}
\hlcom{#' @param input SpatialPolygonsDataFrame input}
\hlcom{#' @param ... other arguments}
\hlcom{#' }
\hlcom{#' @export}
\hlstd{mmplot} \hlkwb{<-} \hlkwa{function}\hlstd{(}\hlkwc{input}\hlstd{,} \hlkwc{...}\hlstd{)} \hlkwd{UseMethod}\hlstd{(mmplot)}

\hlcom{#' @rdname mmplot}
\hlcom{#'}
\hlcom{#' @export}
\hlcom{#'}
\hlcom{#' @S3method mmplot SpatialPolygonsDataFrame}
\hlstd{mmplot.SpatialPolygonsDataFrame} \hlkwb{<-} \hlkwa{function}\hlstd{(}\hlkwc{input}\hlstd{,} \hlkwc{...}\hlstd{)\{}

  \hlcom{# function stuff}

\hlstd{\}}
\end{alltt}
\end{kframe}


\item Related to the last point, the documentation could be improved in some places to clarify the exact object class required for the arguments to each function.  For example, The help file for \texttt{mmplot} indicates that \texttt{stat.data} is a `table' but this really should say `data.frame'.
\item Data input that is linked to the map data could be provided in raw format, with a user-supplied summary function to improve flexibility and reduce burden on the user, e.g., additional arguments passed to mmplot or mmgroupedplot
\item This is more of a personal preference, but I'm not too crazy about a new graphics device being created each time a the function is executed.  This can lead to rapid cluttering of the desktop.
\item The \texttt{create\_map\_table} function could be used internally within \texttt{mmplot} to skip a step, i.e., SpatialPolygonsDataFrame could be used as input directly. 
\item Similarly, polygon simplification could be incorporated into the package
\item Seems like a lot of this could be simplified using only the SpatialPolygonsDataFrame as input.  The data slot could include the raw data used in the \texttt{stat.dat} argument, which can be further summarized for display as a dot plot, boxplot, or other summary.  
\item Maybe return a warning or error if colors does not equal length of groupings?
\item I had to do a bit of searching to find the Information Guide as it's buried in the R library.  Maybe supply a link in the description file so it shows up as a link on the CRAN web page. 
\item Seems like this package could be setup very nicely using an expressive style as in ggplot2 - this might be a lot of work though and probably requires substantial overhaul of package structure.  
\item aspect ratio of maps with resizing of graphics device
\item From JSS manuscript - add histrograms, ts, symbol plots, etc. and incorporate interactivity (via shiny)
\item Break up ideas into easy fixes and future features...
\end{itemize}

\end{document}
